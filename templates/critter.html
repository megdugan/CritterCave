{% extends "base.html" %}
{% block main_content %}

<div class="critter-page">

    <!-- Critter Header Card -->
    <section class="critter-header-card">
        <div class="critter-info-left">
            {% if critter_info.imagepath %}
            <img src="{{ url_for('uploaded_file', filename=critter_info.imagepath) }}"
                 alt="Critter Image" class="critter-profile-img">
            {% endif %}
        </div>

        <div class="critter-info-right">
            <h1 class="critter-name">{{ critter_info.name }}</h1>
            <p class="critter-maker">
                Made by:
                <a href="{{ url_for('user_profile', uid=user.uid) }}">
                    {{ user.name }}
                </a>
            </p>

            <p class="critter-description">
                {{ critter_info.description }}
            </p>

            <a href="{{ url_for('story_upload', cid=critter_info.cid) }}"
               class="button-primary write-story-btn">
               Write a Story About {{ critter_info.name }}
            </a>
        </div>
    </section>

    <!-- Stories Section -->
    <section class="stories-section">

        <h2 class="section-title">Stories</h2>

        <div class="story-group">
            <h3 class="story-group-title">
                Stories by {{ user.name }} (creator)
            </h3>

            <div class="story-card-grid">
                {% for story in stories_by_user %}
                    <div class="story-card pastel-box">
                        <p>{{ story.critter_story }}</p>
                    </div>
                {% else %}
                    <p class="empty-text">No stories found by this author.</p>
                {% endfor %}
            </div>
        </div>

        <div class="story-group">
            <h3 class="story-group-title">
                Stories by other users
            </h3>

            <div class="story-card-grid">
                {% for story in stories_not_by_user %}
                    <div class="story-card pastel-box">
                        <p>{{ story.critter_story }}</p>
                    </div>
                {% else %}
                    <a href="{{ url_for('story_upload', cid=critter_info.cid) }}"
                       class="empty-text linkify">
                       Write {{ critter_info.name }}'s first story!
                    </a>
                {% endfor %}
            </div>
        </div>

    </section>
</div>

{% endblock %}
