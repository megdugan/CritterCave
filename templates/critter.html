{% extends "base.html" %}

{% block head_stuff %}
<title>"Critter Page: Displays a critter's information, 
    including it's photo, name, description, and stories."</title>
{% endblock %}

{% block main_content %}

<div class="critter-page">

    <!-- Critter Header Card -->
    <section class="critter-header-card">
        <div class="critter-info-left">
            {% if critter_info.imagepath %}
            <img src="{{ url_for('uploaded_file', filename=critter_info.imagepath) }}"
                 alt="Critter Image" class="critter-profile-img">
            {% endif %}
        </div>

        <div class="critter-info-right">
            <h1 class="critter-name">{{ critter_info.name }}</h1>
            <p class="critter-maker">
                <h4>Made by:
                <a href="{{ url_for('user_profile', uid=user.uid) }}">
                    {{ user.name }}
                </a>
                </h4>
                <h4>{{ critter_info.created }}</h4>
            </p>

            <p class="critter-description">
                {{ critter_info.description }}
            </p>

            <a href="{{ url_for('story_upload', cid=critter_info.cid) }}"
               class="button-primary write-story-btn">
               Write a Story About {{ critter_info.name }}
            </a>
        </div>
    </section>

    <!-- Stories Section -->
    <section class="stories-section">

        <h2 class="section-title">Stories</h2>

        <div class="story-group">
            <h3 class="story-group-title">
                Stories by {{ user.name }} (creator)
            </h3>

            <div class="story-card-grid">
                {% for story in stories_by_user %}
                    <a href="{{ url_for('story_page', sid=story.sid, cid=critter_info.cid) }}" class="story-card pastel-box story-card-link">
                        <p>{{ story.critter_story }}</p>
                    </a>
                {% else %}
                    <p class="empty-text">No stories found by this author.</p>
                {% endfor %}
            </div>
        </div>

        <div class="story-group">
            <h3 class="story-group-title">
                Stories by other users
            </h3>

            <div class="story-card-grid">
                {% for story in stories_not_by_user %}
                    <a href="{{ url_for('story_page', sid=story.sid, cid=critter_info.cid) }}" class="story-card pastel-box story-card-link">
                        <p>{{ story.critter_story }}</p>
                        <span class="story-author-tag">By {{ story.creator }}</span>
                    </a>
                {% else %}
                    <a href="{{ url_for('story_upload', cid=critter_info.cid) }}"
                    class="empty-text linkify">
                    Write {{ critter_info.name }}'s first story!
                    </a>
                {% endfor %}
            </div>
        </div>

    </section>

    <form action="{{ url_for('delete_critter', cid=critter_info.cid) }}" method="get">
        <button class="button-primary">Delete Critter</button>
    </form>

</div>

{% endblock %}
